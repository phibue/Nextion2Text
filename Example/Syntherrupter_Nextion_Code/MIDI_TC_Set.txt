Page MIDI_TC_Set
    Attributes
        ID               : 0
        Scope            : local
        Send Component ID: disabled
        Width            : 800
        Locked           : no
        Fill             : solid color
        Back. Color      : 65535
    
    Events
        Preinitialize Event
            // Display username
            if(User_Settings.userNum.val==0)
            {
                tUser.txt=" "+User_Settings.u0Name.txt
            }else if(User_Settings.userNum.val==1)
            {
                tUser.txt=" "+User_Settings.u1Name.txt
            }else if(User_Settings.userNum.val==2)
            {
                tUser.txt=" "+User_Settings.u2Name.txt
            }
            //
            // functions shall not be visible
            vis fConvBtnState,0
            vis fStore,0
            // Set page title
            covx coilNum.val,sCoilNum.txt,0,0
            tTitle.txt=sTitleStart.txt+sCoilNum.txt
            // Get coil data
            if(coilNum.val==1)
            {
                sys0=TC_Settings.coil1Chn.val
            }else if(coilNum.val==2)
            {
                sys0=TC_Settings.coil2Chn.val
            }else if(coilNum.val==3)
            {
                sys0=TC_Settings.coil3Chn.val
            }else if(coilNum.val==4)
            {
                sys0=TC_Settings.coil4Chn.val
            }else if(coilNum.val==5)
            {
                sys0=TC_Settings.coil5Chn.val
            }else if(coilNum.val==6)
            {
                sys0=TC_Settings.coil6Chn.val
            }
            // Get button states (format documented in Return button)
            fConvBtnState.val=sys0&0xffff
            // Get pan reach
            sys0=sys0>>16
            sReach.val=sys0&127
            // Get reach mode
            sys0=sys0>>7
            sys1=sys0&1
            if(sys1==0)
            {
                bLinConst.txt=sLinear.txt
            }else
            {
                bLinConst.txt=sConst.txt
            }
            // Get pan
            sys0=sys0>>1
            sPan.val=sys0&127
            // Get pan disabled
            // Note: Since this information is originally stored in the sign bit, we cannot directly assign the value (see https://nextion.tech/instruction-set/#s2_14 )
            sys0=sys0>>7
            if(sys0==0)
            {
                btPanDis.val=0
            }else
            {
                btPanDis.val=1
            }
            //
            // Hide Previous button for first coil
            if(coilNum.val==1)
            {
                vis bPrevious,0
            }
            // Hide Next button for last coil
            if(coilNum.val==TC_Settings.maxCoilCount.val)
            {
                vis bNext,0
            }
            //
            // Hide Pan objects in case its disabled (prevents flickering)
            vis tL,0
            vis sPan,0
            vis tR,0
            vis tPanReach,0
            vis sReach,0
            vis tReachInfo,0
            vis bLinConst,0
            // Show button state
            click fConvBtnState,0
            click btPanDis,0
        
        Touch Press Event
            if(Other_Settings.nBackOff.val!=0)
            {
                // Default "stop" action. Set ontime of all Coils to 0
                // Details about the data format described in a separate file and in the bApply button.
                // shift bits for volume mode
                sys1=3<<6
                sys1+=63 // apply to all coils
                prints "d",1
                prints sys1,1
                prints 0,4 // 0 ontime, 0 duty
                MIDI_Live.set1.val=0
                MIDI_Live.set2.val=0
                MIDI_Live.set3.val=0
                MIDI_Live.set4.val=0
                MIDI_Live.set5.val=0
                MIDI_Live.set6.val=0
            }
        
Variable (int32) origin
    Attributes
        ID    : 6
        Scope : global
        Locked: no
        Value : 0
    
Variable (string) sTitleStart
    Attributes
        ID            : 7
        Scope         : local
        Locked        : no
        Text          : Settings for Tesla Coil 
        Max. Text Size: 30
    
Variable (int32) coilNum
    Attributes
        ID    : 26
        Scope : global
        Locked: no
        Value : 0
    
Variable (string) sCoilNum
    Attributes
        ID            : 27
        Scope         : local
        Locked        : no
        Text          : 0
        Max. Text Size: 1
    
Variable (string) sPanEn
    Attributes
        ID            : 31
        Scope         : local
        Locked        : no
        Text          : Enabled
        Max. Text Size: 8
    
Variable (string) sPanDis
    Attributes
        ID            : 32
        Scope         : local
        Locked        : no
        Text          : Disabled
        Max. Text Size: 8
    
Variable (string) sConst
    Attributes
        ID            : 40
        Scope         : local
        Locked        : no
        Text          : Const
        Max. Text Size: 6
    
Variable (string) sLinear
    Attributes
        ID            : 41
        Scope         : local
        Locked        : no
        Text          : Linear
        Max. Text Size: 6
    
Variable (string) sChnNum
    Attributes
        ID            : 46
        Scope         : local
        Locked        : no
        Text          : 0
        Max. Text Size: 2
    
Number fConvBtnState
    Attributes
        ID                      : 28
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 760
        y coordinate            : 0
        Width                   : 40
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : center
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : enabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Store button state in variable. Bit n corresponds to channel n.
            // sys0 only used because shorter, meaning better readable.
            sys0=btChn0.val
            sys0=btChn1.val*2+sys0
            sys0=btChn2.val*4+sys0
            sys0=btChn3.val*8+sys0
            sys0=btChn4.val*16+sys0
            sys0=btChn5.val*32+sys0
            sys0=btChn6.val*64+sys0
            sys0=btChn7.val*128+sys0
            sys0=btChn8.val*256+sys0
            sys0=btChn9.val*512+sys0
            sys0=btChn10.val*1024+sys0
            sys0=btChn11.val*2048+sys0
            sys0=btChn12.val*4096+sys0
            sys0=btChn13.val*8192+sys0
            sys0=btChn14.val*16384+sys0
            sys0=btChn15.val*32768+sys0
            fConvBtnState.val=sys0
        
        Touch Release Event
            // Load button state from variable. Bit n corresponds to channel n.
            // Make sure all buttons are off.
            btChn0.val=0
            btChn1.val=0
            btChn2.val=0
            btChn3.val=0
            btChn4.val=0
            btChn5.val=0
            btChn6.val=0
            btChn7.val=0
            btChn8.val=0
            btChn9.val=0
            btChn10.val=0
            btChn11.val=0
            btChn12.val=0
            btChn13.val=0
            btChn14.val=0
            btChn15.val=0
            // if x >= 2^n, the nth bit in x is set.
            sys0=32768 //2^15
            if(fConvBtnState.val>=sys0)
            {
                btChn15.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn14.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn13.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn12.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn11.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn10.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn9.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn8.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn7.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn6.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn5.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn4.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn3.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn2.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn1.val=1
                fConvBtnState.val-=sys0
            }
            sys0/=2
            if(fConvBtnState.val>=sys0)
            {
                btChn0.val=1
                fConvBtnState.val-=sys0
            }
        
Number fStore
    Attributes
        ID                      : 44
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 760
        y coordinate            : 20
        Width                   : 40
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : center
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : enabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Serial Data format: 'd', Data Byte 1, 2, 3, 4, 5
            // Data byte 1:
            // Data byte 1:
            //   Bits 0-5: coils to which settings apply.
            //   Bits 6-7: Mode
            //     0b00 = MIDI TC Settings Change
            //     Other values = Not used here.
            // Data byte 2: Bit 0-7 correspond to channel 0-7
            // Data byte 3: Bit 0-7 correspond to channel 8-15
            // Data byte 4:
            //   Bit 0-6 contain the Pan value (0-127)
            //   Bit 7: 0: Pan enabled, 1: Pan disabled
            // Data Byte 5:
            //   Bit 0-6: Pan reach, ranging from 0-127. Notes within this range (abs(coilPanPos - notePanPos) <= panReach) will play on this coil.
            //   Bit 7:
            //     0 = linear mode. The volume of the note decreases linearly with the distance from the coil. At distance 0 the volume is equal to the notes volume. At the limit of the range the volume drops to 0.
            //     1 = constant mode. All notes within the range will play at their nominal volume.
            //
            //
            // Convert button state to bit array
            click fConvBtnState,1
            //
            // Add Pan data to sys0
            sys0=btPanDis.val<<7
            sys0+=sPan.val
            // Add pan reach data to sys0
            sys0=sys0<<1
            if(bLinConst.txt==sConst.txt)
            {
                sys0+=1
            }
            sys0=sys0<<7
            sys0+=sReach.val
            sys0=sys0<<16
            //
            // Add button state bit array to sys0 and send the data
            sys0+=fConvBtnState.val
            //
            // sys1: coil bit. Note that coilNum ranges from 1-6 instead of 0-5
            sys1=1<<coilNum.val
            sys1=sys1>>1
            prints "d",1
            prints sys1,1
            prints sys0,4
            // Store settings in coil variable
            if(coilNum.val==1)
            {
                TC_Settings.coil1Chn.val=sys0
            }else if(coilNum.val==2)
            {
                TC_Settings.coil2Chn.val=sys0
            }else if(coilNum.val==3)
            {
                TC_Settings.coil3Chn.val=sys0
            }else if(coilNum.val==4)
            {
                TC_Settings.coil4Chn.val=sys0
            }else if(coilNum.val==5)
            {
                TC_Settings.coil5Chn.val=sys0
            }else if(coilNum.val==6)
            {
                TC_Settings.coil6Chn.val=sys0
            }
        
Text tHideBack1
    Attributes
        ID                  : 1
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 313
        y coordinate        : 256
        Width               : 450
        Height              : 110
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 0
        Horizontal Alignment: center
        Vertical Alignment  : center
        Input Type          : character
        Text                :  
        Max. Text Size      : 1
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // This is just to hide the background around the sliders so that you do not turn the outputs off by accident.
        
Text tTitle
    Attributes
        ID                  : 2
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 10
        Width               : 770
        Height              : 64
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 1
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Settings for Tesla Coil 42
        Max. Text Size      : 30
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            click dp,1
        
Text tUser
    Attributes
        ID                  : 4
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 0
        y coordinate        : 460
        Width               : 800
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 4589
        Font Color          : 65535
        Horizontal Alignment: left
        Vertical Alignment  : center
        Input Type          : character
        Text                :  Guest
        Max. Text Size      : 32
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
Text tChan
    Attributes
        ID                  : 5
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 90
        Width               : 770
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Assign MIDI channels:
        Max. Text Size      : 30
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            click dp,1
        
Text tPan
    Attributes
        ID                  : 30
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 262
        Width               : 80
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Pan:
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            click dp,1
        
Text tL
    Attributes
        ID                  : 33
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 291
        y coordinate        : 262
        Width               : 20
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : L
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            click dp,1
        
Text tR
    Attributes
        ID                  : 34
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 765
        y coordinate        : 262
        Width               : 20
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : R
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            click dp,1
        
Text tPanReach
    Attributes
        ID                  : 36
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 16
        y coordinate        : 317
        Width               : 110
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Reach:
        Max. Text Size      : 10
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            click dp,1
        
Text tReachInfo
    Attributes
        ID                  : 38
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 368
        Width               : 708
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : center
        Input Type          : character
        Text                : Distance from source at which the signal is no more audible. Same scale as pan slider.
        Max. Text Size      : 255
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            click dp,1
        
Slider sPan
    Attributes
        ID                     : 29
        Scope                  : local
        Send Component ID      : disabled
        x coordinate           : 318
        y coordinate           : 261
        Width                  : 440
        Height                 : 45
        Locked                 : no
        Direction              : horizontal
        Fill                   : image
        Cursor width           : auto
        Cursor height          : 255
        Back. Picture ID       : 19
        Slided Back. Picture ID: 65535
        Position               : 64
        Upper range limit      : 127
        Lower range limit      : 0
        Channel count          : 25
    
    Events
        Touch Release Event
            if(sPan.val<=6)
            {
                sPan.val=0
            }else if(sPan.val<=19)
            {
                sPan.val=13
            }else if(sPan.val<=32)
            {
                sPan.val=26
            }else if(sPan.val<=45)
            {
                sPan.val=39
            }else if(sPan.val<=57)
            {
                sPan.val=51
            }else if(sPan.val<=70)
            {
                sPan.val=64
            }else if(sPan.val<=83)
            {
                sPan.val=77
            }else if(sPan.val<=96)
            {
                sPan.val=90
            }else if(sPan.val<=108)
            {
                sPan.val=102
            }else if(sPan.val<=121)
            {
                sPan.val=115
            }else
            {
                sPan.val=127
            }
        
Slider sReach
    Attributes
        ID                     : 37
        Scope                  : local
        Send Component ID      : disabled
        x coordinate           : 318
        y coordinate           : 316
        Width                  : 440
        Height                 : 45
        Locked                 : no
        Direction              : horizontal
        Fill                   : image
        Cursor width           : auto
        Cursor height          : 255
        Back. Picture ID       : 19
        Slided Back. Picture ID: 65535
        Position               : 64
        Upper range limit      : 127
        Lower range limit      : 0
        Channel count          : 25
    
    Events
        Touch Release Event
            if(sReach.val<=6)
            {
                sReach.val=0
            }else if(sReach.val<=19)
            {
                sReach.val=13
            }else if(sReach.val<=32)
            {
                sReach.val=26
            }else if(sReach.val<=45)
            {
                sReach.val=39
            }else if(sReach.val<=57)
            {
                sReach.val=51
            }else if(sReach.val<=70)
            {
                sReach.val=64
            }else if(sReach.val<=83)
            {
                sReach.val=77
            }else if(sReach.val<=96)
            {
                sReach.val=90
            }else if(sReach.val<=108)
            {
                sReach.val=102
            }else if(sReach.val<=121)
            {
                sReach.val=115
            }else
            {
                sReach.val=127
            }
        
Button bReturn
    Attributes
        ID                               : 3
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 15
        y coordinate                     : 405
        Width                            : 156
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 7
        Back. Picture ID (Pressed)       : 8
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Return
        Max. Text Size                   : 10
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            // Since this code is also executed by the previous/next buttons, it can't be here, otherwise you would see a Touch Press Event on this button, too.
            click fStore,1
        
        Touch Release Event
            // Go back to origin page.
            page origin.val
        
Button bNone
    Attributes
        ID                               : 24
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 681
        y coordinate                     : 195
        Width                            : 104
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 5
        Back. Picture ID (Pressed)       : 6
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : None
        Max. Text Size                   : 6
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            btChn0.val=0
            btChn1.val=0
            btChn2.val=0
            btChn3.val=0
            btChn4.val=0
            btChn5.val=0
            btChn6.val=0
            btChn7.val=0
            btChn8.val=0
            btChn9.val=0
            btChn10.val=0
            btChn11.val=0
            btChn12.val=0
            btChn13.val=0
            btChn14.val=0
            btChn15.val=0
            click btChn0,0
        
Button bAll
    Attributes
        ID                               : 25
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 681
        y coordinate                     : 140
        Width                            : 104
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 5
        Back. Picture ID (Pressed)       : 6
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : All
        Max. Text Size                   : 6
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            btChn0.val=1
            btChn1.val=1
            btChn2.val=1
            btChn3.val=1
            btChn4.val=1
            btChn5.val=1
            btChn6.val=1
            btChn7.val=1
            btChn8.val=1
            btChn9.val=1
            btChn10.val=1
            btChn11.val=1
            btChn12.val=1
            btChn13.val=1
            btChn14.val=1
            btChn15.val=1
            click btChn0,0
        
Button bLinConst
    Attributes
        ID                               : 39
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 160
        y coordinate                     : 315
        Width                            : 104
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 5
        Back. Picture ID (Pressed)       : 6
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Linear
        Max. Text Size                   : 6
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            if(bLinConst.txt==sLinear.txt)
            {
                bLinConst.txt=sConst.txt
            }else
            {
                bLinConst.txt=sLinear.txt
            }
        
Button bPrevious
    Attributes
        ID                               : 42
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 211
        y coordinate                     : 405
        Width                            : 156
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 7
        Back. Picture ID (Pressed)       : 8
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Previous
        Max. Text Size                   : 10
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            // Save current state and send it to the microcontroller
            click fStore,1
            // Set previous coil
            if(coilNum.val>1)
            {
                coilNum.val-=1
            }
            // Reload page for previous coil
            page MIDI_TC_Set
        
Button bNext
    Attributes
        ID                               : 43
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 387
        y coordinate                     : 405
        Width                            : 156
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 7
        Back. Picture ID (Pressed)       : 8
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Next
        Max. Text Size                   : 10
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            // Save current state and send it to the microcontroller
            click fStore,1
            // Set next coil
            if(coilNum.val<TC_Settings.maxCoilCount.val)
            {
                coilNum.val+=1
            }
            // Reload page for previous coil
            page MIDI_TC_Set
        
Dual-state Button btChn0
    Attributes
        ID                               : 8
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 15
        y coordinate                     : 140
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 0
        Max. Text Size                   : 2
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn0.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn1
    Attributes
        ID                               : 9
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 95
        y coordinate                     : 140
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 1
        Max. Text Size                   : 2
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn1.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn2
    Attributes
        ID                               : 10
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 175
        y coordinate                     : 140
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 2
        Max. Text Size                   : 2
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn2.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn3
    Attributes
        ID                               : 11
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 255
        y coordinate                     : 140
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 3
        Max. Text Size                   : 2
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn3.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn8
    Attributes
        ID                               : 12
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 15
        y coordinate                     : 195
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 8
        Max. Text Size                   : 2
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn8.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn9
    Attributes
        ID                               : 13
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 95
        y coordinate                     : 195
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 9
        Max. Text Size                   : 2
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn9.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn10
    Attributes
        ID                               : 14
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 175
        y coordinate                     : 195
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 10
        Max. Text Size                   : 3
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn10.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn11
    Attributes
        ID                               : 15
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 255
        y coordinate                     : 195
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 11
        Max. Text Size                   : 3
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn11.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn4
    Attributes
        ID                               : 16
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 335
        y coordinate                     : 140
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 4
        Max. Text Size                   : 2
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn4.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn5
    Attributes
        ID                               : 17
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 415
        y coordinate                     : 140
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 5
        Max. Text Size                   : 2
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn5.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn6
    Attributes
        ID                               : 18
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 495
        y coordinate                     : 140
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 6
        Max. Text Size                   : 2
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn6.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn7
    Attributes
        ID                               : 19
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 575
        y coordinate                     : 140
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 7
        Max. Text Size                   : 2
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn7.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn12
    Attributes
        ID                               : 20
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 335
        y coordinate                     : 195
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 12
        Max. Text Size                   : 3
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn12.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn13
    Attributes
        ID                               : 21
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 415
        y coordinate                     : 195
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 13
        Max. Text Size                   : 3
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn13.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn14
    Attributes
        ID                               : 22
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 495
        y coordinate                     : 195
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 14
        Max. Text Size                   : 3
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn14.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btChn15
    Attributes
        ID                               : 23
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 575
        y coordinate                     : 195
        Width                            : 70
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 23
        Back. Picture ID (Pressed)       : 24
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 15
        Max. Text Size                   : 3
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sChnNum.txt=btChn15.txt
            tmButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmButtonHold.en=0
            tmButtonHold.tim=Other_Settings.nHoldTime.val
        
Dual-state Button btPanDis
    Attributes
        ID                               : 35
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 108
        y coordinate                     : 260
        Width                            : 156
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 8
        Back. Picture ID (Pressed)       : 7
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Enabled
        Max. Text Size                   : 8
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            // For some reason the button does not show its text in the editor view. However when the program runs everything is fine.
        
        Touch Release Event
            if(btPanDis.val!=0)
            {
                btPanDis.txt=sPanDis.txt
                vis tL,0
                vis sPan,0
                vis tR,0
                vis tPanReach,0
                vis sReach,0
                vis tReachInfo,0
                vis bLinConst,0
            }else
            {
                btPanDis.txt=sPanEn.txt
                vis tL,1
                vis sPan,1
                vis tR,1
                vis tPanReach,1
                vis sReach,1
                vis tReachInfo,1
                vis bLinConst,1
            }
        
Timer tmButtonHold
    Attributes
        ID         : 45
        Scope      : local
        Locked     : no
        Period (ms): 400
        Enabled    : no
    
    Events
        Timer Event
            tmButtonHold.en=0
            MIDI_Chn_Set.origin.val=dp
            covx sChnNum.txt,MIDI_Chn_Set.chnNum.val,0,0
            // Button has been hold, not pressed. Revert state change.
            if(sChnNum.txt==btChn0.txt)
            {
                btChn0.val=1-btChn0.val
            }else if(sChnNum.txt==btChn1.txt)
            {
                btChn1.val=1-btChn1.val
            }else if(sChnNum.txt==btChn2.txt)
            {
                btChn2.val=1-btChn2.val
            }else if(sChnNum.txt==btChn3.txt)
            {
                btChn3.val=1-btChn3.val
            }else if(sChnNum.txt==btChn4.txt)
            {
                btChn4.val=1-btChn4.val
            }else if(sChnNum.txt==btChn5.txt)
            {
                btChn5.val=1-btChn5.val
            }else if(sChnNum.txt==btChn6.txt)
            {
                btChn6.val=1-btChn6.val
            }else if(sChnNum.txt==btChn7.txt)
            {
                btChn7.val=1-btChn7.val
            }else if(sChnNum.txt==btChn8.txt)
            {
                btChn8.val=1-btChn8.val
            }else if(sChnNum.txt==btChn9.txt)
            {
                btChn9.val=1-btChn9.val
            }else if(sChnNum.txt==btChn10.txt)
            {
                btChn10.val=1-btChn10.val
            }else if(sChnNum.txt==btChn11.txt)
            {
                btChn11.val=1-btChn11.val
            }else if(sChnNum.txt==btChn12.txt)
            {
                btChn12.val=1-btChn12.val
            }else if(sChnNum.txt==btChn13.txt)
            {
                btChn13.val=1-btChn13.val
            }else if(sChnNum.txt==btChn14.txt)
            {
                btChn14.val=1-btChn14.val
            }else if(sChnNum.txt==btChn15.txt)
            {
                btChn15.val=1-btChn15.val
            }
            // Store settings before leaving the page
            click fStore,1
            page MIDI_Chn_Set
        
